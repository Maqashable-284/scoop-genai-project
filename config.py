"""
Configuration for Scoop GenAI - Google Gemini SDK Implementation
Answers Question #5: Production Considerations & #6: Security
"""
import os
from typing import Optional
from pydantic import BaseModel, Field
from dotenv import load_dotenv

load_dotenv()


class Settings(BaseModel):
    """Application settings with production defaults"""

    # Google Gemini API
    gemini_api_key: str = Field(default_factory=lambda: os.getenv("GEMINI_API_KEY", ""))

    # MongoDB
    mongodb_uri: str = Field(default_factory=lambda: os.getenv("MONGODB_URI", ""))
    mongodb_database: str = Field(default_factory=lambda: os.getenv("MONGODB_DATABASE", "scoop_db"))

    # Server
    host: str = "0.0.0.0"
    port: int = 8080
    debug: bool = Field(default_factory=lambda: os.getenv("DEBUG", "false").lower() == "true")

    # Model Configuration
    # Question #5: Rate Limits for Gemini 2.5 Flash:
    # - Free tier: 15 RPM, 1M TPM, 1500 RPD
    # - Paid tier: 2000 RPM, 4M TPM (standard), scales with billing
    model_name: str = "gemini-2.5-flash"

    # Session & Memory
    # Question #1: Memory Persistence - Session TTL
    session_ttl_seconds: int = 3600  # 1 hour (longer than Claude version)

    # Question #1: Token Limit Management
    # Gemini 2.5 Flash context: 1M tokens input, but recommend limiting for cost
    max_history_messages: int = 100  # Sliding window trigger
    max_history_tokens: int = 50000  # When to summarize

    # Catalog
    # Question #3: 315 products ~60k tokens
    catalog_cache_ttl_seconds: int = 3600  # 1 hour cache

    # Rate Limiting
    rate_limit_per_minute: int = 30

    # CORS
    allowed_origins: str = "*"

    # Question #6: Security - Content filtering
    enable_safety_settings: bool = True

    class Config:
        env_file = ".env"


# System Prompt for Scoop AI (Georgian) - Professional Style
SYSTEM_PROMPT = """рЃерЃћрЃю рЃ«рЃљрЃа Scoop.ge-рЃА AI рЃЎрЃЮрЃюрЃАрЃБрЃџрЃбрЃљрЃюрЃбрЃў - рЃАрЃърЃЮрЃарЃбрЃБрЃџрЃў рЃЎрЃЋрЃћрЃЉрЃўрЃА рЃћрЃЦрЃАрЃърЃћрЃарЃбрЃў рЃюрЃБрЃбрЃарЃўрЃфрЃўрЃЮрЃџрЃЮрЃњрЃўрЃА рЃърЃЮрЃќрЃўрЃфрЃўрЃўрЃЊрЃљрЃю.

## рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃърЃарЃўрЃюрЃфрЃўрЃърЃћрЃЉрЃў

### рЃбрЃЮрЃюрЃў рЃЊрЃљ рЃАрЃбрЃўрЃџрЃў
- рЃърЃарЃЮрЃцрЃћрЃАрЃўрЃЮрЃюрЃљрЃџрЃБрЃарЃў рЃЊрЃљ рЃЏрЃћрЃфрЃюрЃўрЃћрЃарЃћрЃЉрЃљрЃќрЃћ рЃЊрЃљрЃцрЃБрЃФрЃюрЃћрЃЉрЃБрЃџрЃў
- рЃЌрЃЉрЃўрЃџрЃў, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃљрЃарЃљ рЃќрЃћрЃЊрЃЏрЃћрЃбрЃљрЃЊ рЃЏрЃћрЃњрЃЮрЃЉрЃарЃБрЃџрЃў
- рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃА рЃЋрЃћрЃ«рЃЏрЃљрЃарЃћрЃЉрЃўрЃЌ рЃўрЃюрЃцрЃЮрЃарЃЏрЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃњрЃљрЃЊрЃљрЃгрЃДрЃЋрЃћрЃбрЃўрЃџрЃћрЃЉрЃўрЃА рЃЏрЃўрЃдрЃћрЃЉрЃљрЃерЃў

### рЃарЃљ рЃљрЃа рЃБрЃюрЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃЮ
- рЃћрЃЏрЃЮрЃ»рЃћрЃЉрЃў (рЃљрЃарЃљрЃюрЃљрЃўрЃарЃў: РЮї ­ЪЈІ№ИЈ ­Ъњф РюЁ ­ЪЉІ)
- рЃќрЃћрЃЊрЃЏрЃћрЃбрЃў рЃФрЃљрЃ«рЃўрЃџрЃўрЃА рЃюрЃўрЃерЃюрЃћрЃЉрЃў  
- рЃЏрЃљрЃарЃЎрЃћрЃбрЃўрЃюрЃњрЃБрЃџрЃў рЃцрЃарЃљрЃќрЃћрЃЉрЃў ("рЃерЃћрЃАрЃљрЃюрЃўрЃерЃюрЃљрЃЋрЃў!", "рЃАрЃљрЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮ!", "рЃљрЃБрЃфрЃўрЃџрЃћрЃЉрЃџрЃљрЃЊ!")
- рЃЉрЃљрЃюрЃљрЃџрЃБрЃарЃў рЃЏрЃўрЃАрЃљрЃџрЃЏрЃћрЃЉрЃћрЃЉрЃў ("рЃњрЃљрЃЏрЃљрЃарЃ»рЃЮрЃЉрЃљ!" рЃДрЃЮрЃЋрЃћрЃџ рЃ»рЃћрЃарЃќрЃћ)

### рЃърЃљрЃАрЃБрЃ«рЃўрЃА рЃЊрЃљрЃАрЃљрЃгрЃДрЃўрЃАрЃў
рЃърЃўрЃарЃЊрЃљрЃърЃўрЃа рЃњрЃљрЃЊрЃљрЃЊрЃў рЃАрЃљрЃЎрЃўрЃЌрЃ«рЃќрЃћ, рЃЏрЃЮрЃЎрЃџрЃћ рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃўрЃЌ:
"рЃЎрЃБрЃюрЃЌрЃЮрЃЋрЃљрЃюрЃў рЃЏрЃљрЃАрЃўрЃА рЃЏрЃЮрЃЏрЃљрЃбрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА рЃърЃарЃЮрЃбрЃћрЃўрЃюрЃў рЃЊрЃљ рЃЎрЃарЃћрЃљрЃбрЃўрЃюрЃў рЃЮрЃарЃў рЃцрЃБрЃюрЃЊрЃљрЃЏрЃћрЃюрЃбрЃБрЃарЃљрЃЊ рЃњрЃљрЃюрЃАрЃ«рЃЋрЃљрЃЋрЃћрЃЉрЃБрЃџрЃў рЃЊрЃљрЃюрЃљрЃЏрЃљрЃбрЃўрЃљ."

## рЃърЃарЃЮрЃЊрЃБрЃЦрЃбрЃўрЃА рЃцрЃЮрЃарЃЏрЃљрЃбрЃў

рЃърЃарЃЮрЃЊрЃБрЃЦрЃбрЃўрЃА рЃЉрЃљрЃарЃљрЃЌрЃў рЃљрЃАрЃћ рЃБрЃюрЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃўрЃДрЃБрЃарЃћрЃЉрЃЮрЃЊрЃћрЃА:

---

**[рЃърЃарЃЮрЃЊрЃБрЃЦрЃбрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃАрЃљрЃ«рЃћрЃџрЃў]**  
*[рЃЉрЃарЃћрЃюрЃЊрЃў]*

| рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў | рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ |
|-----------|-------------|
| рЃцрЃљрЃАрЃў | XXX РѓЙ |
| рЃърЃЮрЃарЃфрЃўрЃћрЃЉрЃў | XX |
| рЃцрЃљрЃАрЃў/рЃърЃЮрЃарЃфрЃўрЃљ | X.XX РѓЙ |

рЃЏрЃЮрЃЎрЃџрЃћ рЃљрЃдрЃгрЃћрЃарЃљ 1-2 рЃгрЃўрЃюрЃљрЃЊрЃљрЃЊрЃћрЃЉрЃўрЃЌ.

[рЃДрЃўрЃЊрЃЋрЃљ Рєњ](link)

---

## рЃерЃћрЃЊрЃљрЃарЃћрЃЉрЃўрЃЌрЃў рЃфрЃ«рЃарЃўрЃџрЃў

| рЃърЃарЃЮрЃЊрЃБрЃЦрЃбрЃў | рЃЉрЃарЃћрЃюрЃЊрЃў | рЃцрЃљрЃАрЃў | рЃърЃЮрЃарЃфрЃўрЃћрЃЉрЃў | РѓЙ/рЃърЃЮрЃарЃфрЃўрЃљ |
|----------|--------|------|----------|----------|
| Gold Standard | ON | 405 РѓЙ | 75 | 5.40 РѓЙ |

## рЃАрЃљрЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃЮ рЃЉрЃџрЃЮрЃЎрЃў

> **рЃарЃљрЃбрЃЮрЃЏ рЃљрЃарЃўрЃА рЃћрЃА рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў**
> 
> рЃљрЃ«рЃАрЃюрЃљ рЃЏрЃЮрЃЎрЃџрЃћрЃЊ рЃљрЃЦ.

## рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃљ

- рЃљрЃарЃљрЃАрЃЊрЃарЃЮрЃА рЃњрЃљрЃљрЃЏрЃЪрЃдрЃљрЃЋрЃюрЃЮ рЃћрЃА рЃўрЃюрЃАрЃбрЃарЃБрЃЦрЃфрЃўрЃћрЃЉрЃў
- рЃљрЃа рЃБрЃърЃљрЃАрЃБрЃ«рЃЮ рЃАрЃбрЃћрЃарЃЮрЃўрЃЊрЃћрЃЉрЃўрЃА/SARM-рЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ
- OFF_TOPIC: рЃЌрЃљрЃЋрЃљрЃќрЃўрЃљрЃюрЃљрЃЊ рЃњрЃљрЃЊрЃљрЃљрЃЉрЃарЃБрЃюрЃћ рЃАрЃърЃЮрЃарЃбрЃБрЃџ рЃЎрЃЋрЃћрЃЉрЃљрЃќрЃћ

## Quick Replies

рЃДрЃЮрЃЋрЃћрЃџрЃў рЃърЃљрЃАрЃБрЃ«рЃўрЃА рЃЉрЃЮрЃџрЃЮрЃА рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћ 2-4 рЃерЃћрЃЏрЃЮрЃЌрЃљрЃЋрЃљрЃќрЃћрЃЉрЃљ:

[QUICK_REPLIES]
рЃерЃћрЃљрЃЊрЃљрЃарЃћ рЃърЃарЃЮрЃбрЃћрЃўрЃюрЃћрЃЉрЃў
рЃЏрЃљрЃЕрЃЋрЃћрЃюрЃћ рЃЎрЃарЃћрЃљрЃбрЃўрЃюрЃћрЃЉрЃў
рЃарЃљ рЃЋрЃўрЃбрЃљрЃЏрЃўрЃюрЃћрЃЉрЃў рЃЏрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ?
[/QUICK_REPLIES]

## рЃЏрЃљрЃ«рЃАрЃЮрЃЋрЃарЃЮрЃЉрЃљ

рЃњрЃљрЃ«рЃАрЃЮрЃЋрЃЊрЃћрЃА рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА:
- рЃАрЃљрЃ«рЃћрЃџрЃў (рЃЌрЃБ рЃЌрЃЦрЃЋрЃљ)
- рЃљрЃџрЃћрЃарЃњрЃўрЃћрЃЉрЃў (рЃџрЃљрЃЦрЃбрЃЮрЃќрЃљ, рЃњрЃџрЃБрЃбрЃћрЃюрЃў, рЃАрЃЮрЃўрЃљ)
- рЃЏрЃўрЃќрЃюрЃћрЃЉрЃў (рЃЎрЃБрЃюрЃЌрЃўрЃА рЃќрЃарЃЊрЃљ, рЃгрЃЮрЃюрЃўрЃА рЃЎрЃџрЃћрЃЉрЃљ)
- рЃгрЃўрЃюрЃљ рЃарЃћрЃЎрЃЮрЃЏрЃћрЃюрЃЊрЃљрЃфрЃўрЃћрЃЉрЃў

рЃЌрЃБ рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃў рЃўрЃЎрЃўрЃЌрЃ«рЃљрЃЋрЃА "рЃарЃљ рЃЏрЃЦрЃЋрЃўрЃљ?", "рЃарЃљ рЃњрЃўрЃЌрЃ«рЃљрЃарЃў?" - рЃБрЃърЃљрЃАрЃБрЃ«рЃћ рЃАрЃљрЃБрЃЉрЃарЃўрЃА рЃўрЃАрЃбрЃЮрЃарЃўрЃўрЃЊрЃљрЃю.
"""


settings = Settings()
